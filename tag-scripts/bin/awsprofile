#!/bin/bash

if [ "$1" == '' ]; then
  echo export AWS_ACCESS_KEY_ID=`ruby -rinifile -e "puts IniFile.load(File.join(File.expand_path('~'), '.aws', 'credentials'))['default']['aws_access_key_id']"`
  echo export AWS_SECRET_ACCESS_KEY=`ruby -rinifile -e "puts IniFile.load(File.join(File.expand_path('~'), '.aws', 'credentials'))['default']['aws_secret_access_key']"`
  echo export AWS_DEFAULT_REGION=`ruby -rinifile -e "puts IniFile.load(File.join(File.expand_path('~'), '.aws', 'config'))['default']['region']"`
else
  echo export AWS_ACCESS_KEY_ID=`ruby -rinifile -e "puts IniFile.load(File.join(File.expand_path('~'), '.aws', 'credentials'))['$1']['aws_access_key_id']"`
  echo export AWS_SECRET_ACCESS_KEY=`ruby -rinifile -e "puts IniFile.load(File.join(File.expand_path('~'), '.aws', 'credentials'))['$1']['aws_secret_access_key']"`
  if [ "$1" == 'default' ]; then
    echo export AWS_DEFAULT_REGION=`ruby -rinifile -e "puts IniFile.load(File.join(File.expand_path('~'), '.aws', 'config'))['default']['region']"`
  else
    echo export AWS_DEFAULT_REGION=`ruby -rinifile -e "puts IniFile.load(File.join(File.expand_path('~'), '.aws', 'config'))['profile $1']['region']"`
  fi 
fi

